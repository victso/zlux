/**
 * @package     zlux
 * @version     2.0.3
 * @author      ZOOlanders - http://zoolanders.com
 * @license     GNU General Public License v2 or later
 */

var $=require("jquery"),UI=require("uikit"),ZX={version:"2.0.3"};ZX.url={},ZX.url.urls={ajax:"",root:"",root_path:"",zlux:""},ZX.url.push=function(e){UI.$.extend(ZX.url.urls,e)},ZX.url.get=function(e,n){e=e.split(":"),n=void 0===n?{}:n;var t;if(2===e.length&&""!==e[1]){var r=ZX.url.urls.root_path.replace(/^\//,"");t=ZX.url._get(e[0])+"/"+e[1].replace(new RegExp("^"+r,"g"),"").replace(new RegExp("^/"+r,"g"),"")}else t=ZX.url._get(e[0])+(UI.$.isEmptyObject(n)?"":"&"+UI.$.param(n));return ZX.url.clean(t)},ZX.url._get=function(e){return void 0!==ZX.url.urls[e]?ZX.url.urls[e]:e},ZX.url.clean=function(e){return e?e.replace(/\\/g,"/").replace(/\/\/+/g,"/").replace(/undefined/g,"").replace(/\/$/g,"").replace(/:\//g,"://"):""},ZX.lang={},ZX.lang.strings={},ZX.lang.push=function(e){UI.$.extend(ZX.lang.strings,e)},ZX.lang.get=function(e){return ZX.lang.strings[e]||e},ZX.lang._=ZX.lang.get,ZX.lang.sprintf=function(e){var n=[].slice.call(arguments,1);return e=ZX.lang.get(e),e.replace(/%[a-z]/g,function(){var e=n.shift();return"undefined"!==ZX.utils.typeOf(e)?e:""})},ZX.utils={},ZX.utils.typeOf=function(e){return{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},ZX.utils.options=function(e){if(UI.$.isPlainObject(e))return e;var n=e?e.indexOf("{"):-1,t={};if(-1!=n)try{t=new Function("","var json = "+e.substr(n)+"; return JSON.parse(JSON.stringify(json));")()}catch(r){}return t},String.prototype.hashCode=function(){if(Array.prototype.reduce)return this.split("").reduce(function(e,n){return e=(e<<5)-e+n.charCodeAt(0),e&e},0);var e=0;if(0===this.length)return e;for(var n=0;n<this.length;n++){var t=this.charCodeAt(n);e=(e<<5)-e+t,e&=e}return e},window.zlux=ZX,UI.$.zx=ZX,UI.ready(function(){UI.$("[data-uk-nestable]").on("nestable-start",function(){UI.$(".uk-nestable-list-dragged").wrap('<div class="zx" />')})}),module.exports=ZX;var UI=require("uikit"),ZX=require("zlux");ZX.extensions={},ZX.plugin=function(e,n){var t=function(e,n){this.element=e?$(e):null,this.init(n)};return $.extend(!0,t.prototype,{type:"plugin",init:function(){}},n),this.extensions[e]=t,this[e]=function(){var n,t;if(arguments.length)switch(arguments.length){case 1:"string"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof jQuery?n=$(arguments[0]):t=arguments[0];break;case 2:n=$(arguments[0]),t=arguments[1]}return new ZX.extensions[e](n,t)},t},ZX.fn=function(e,n){var t=arguments,r=e.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),i=r[1],s=r[2];return ZX[i]?"component"===ZX.extensions[i].prototype.type?this.each(function(){var e=$(this),r=e.data(i);r||(e.data(i,r=ZX[i](this,s?void 0:n)),ZX.extensions[i].instances.push(r)),s&&r[s].apply(r,Array.prototype.slice.call(t,1))}):"plugin"===ZX.extensions[i].prototype.type?this.each(function(){ZX[i](this,Array.prototype.slice.call(t,1))}):void 0:($.error("ZLUX extension ["+i+"] does not exist."),this)},$.fn.zx=ZX.fn,function(e,n,t){"use strict";n.ajax={},n.ajax.request=function(t){var r={success:!1,errors:[],notices:[]},i=t.queue?t.queue:null,s=null;return delete t.queue,t=e.extend(!0,{dataType:"json",type:"POST"},t),e.Deferred(function(o){s=i?n.ajax.queue(i,t):e.ajax(t),s.done(function(i,s,a){if("json"===t.dataType)if("object"!==n.utils.typeOf(i))try{json=e.parseJSON(i)}catch(u){r.errors.push(String(i)),r.errors.push("An server-side error occurred. "+String(u)),o.reject(r)}else void 0===i.success?(i.errors=["Response format error: status not specified"],o.reject(i)):i.success?o.resolve(i):o.reject(i);else o.resolve(i)}).fail(function(e,n,t){switch(e.status){case 0:break;case 403:r.errors.push("The session has expired.");break;case 404:r.errors.push("The requested URL is not accesible.");break;case 500:r.errors.push("A server-side error has occurred.");break;default:r.errors.push("An "+n+" occurred<br />"+t+"<br /><br />Returned"+e.responseText)}r.status=e.status,o.reject(r)})}).promise()},n.ajax.requestAndNotify=function(t,r){return r=void 0===r?{}:r,n.ajax.request(t).done(function(t){r.group&&n.notify.closeAll(r.group),t.message&&n.notify(t.message,e.extend(!0,{status:"success"},r))}).fail(function(t){r.group&&n.notify.closeAll(r.group),t.errors&&t.errors.length&&e.each(t.errors,function(){n.notify(this,e.extend(!0,{status:"danger"},r))})}).always(function(t){t.notices&&t.notices.length&&e.each(t.notices,function(){n.notify(this,e.extend(!0,{status:"warning"},r))})})};var r={};n.ajax.queue=function(n,t){function i(e){r[n]?r[n].push(e):(r[n]=[],e())}function s(){if(r[n]){var e=r[n].shift();e?e():delete r[n]}}if("undefined"==typeof t)throw"AjaxQ: queue name is not provided";var o=e.Deferred(),a=o.promise();a.success=a.done,a.error=a.fail,a.complete=a.always;var u=e.extend(!0,{},t);return i(function(){var n=e.ajax.apply(window,[u]).always(s);n.done(function(){o.resolve.apply(this,arguments)}),n.fail(function(){o.reject.apply(this,arguments)})}),a},e.each(["getq","postq"],function(t,r){e[r]=function(t,i,s,o,a){return e.isFunction(s)&&(a=a||o,o=s,s=void 0),n.ajax.queue(t,{type:"postq"===r?"post":"get",url:i,data:s,success:o,dataType:a})}});var i=function(e){return r.hasOwnProperty(e)},s=function(){for(var e in r)if(i(e))return!0;return!1};n.ajax.queue.isRunning=function(e){return e?i(e):s()},n.ajax.queue.clear=function(e){if(e)r[e]&&delete r[e];else for(var n in r)r.hasOwnProperty(n)&&delete r[n]}}(jQuery,zlux,UIkit),function(e,n,t){"use strict";n.plugin("animate",{init:function(n){var t=this,r="zx-animate-"+e.trim(n[0]),i=n[1]?n[1]:null;t.animate(r).done(function(){i&&i.apply(t.element)})},animate:function(n){var t=this;return e.Deferred(function(e){t.element.addClass(n).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(r){t.element.removeClass(n),e.resolve()})}).promise()}})}(jQuery,zlux,UIkit),function(e,n,t){"use strict";var r=function(){},i=function(n,t){var r=e.UIkit.modal.dialog(n,t);return e.extend(r,{content:function(e){var n=this.dialog;return e?(n.html(e),this):n.html()}}),r.element.addClass("zx"),r},s=function(t,r){var i=e.UIkit.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-buttons"><button class="uk-button uk-button-small uk-button-primary uk-modal-close">'+n.lang.get("Ok")+"</button></div>"].join(""),e.extend({bgclose:!1,keyboard:!1},r));return i.show(),i},o=function(t,r,i){r=e.isFunction(r)?r:function(){};var s=e.UIkit.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(t)+"</div>",'<div class="uk-modal-buttons"><button class="uk-button uk-button-small uk-button-primary js-modal-confirm">'+n.lang.get("Ok")+'</button> <button class="uk-button uk-button-small uk-modal-close">'+n.lang.get("Cancel")+"</button></div>"].join(""),e.extend({bgclose:!1,keyboard:!1},i));return s.element.find(".js-modal-confirm").on("click",function(){r(),s.hide()}),s.show(),s};n.modal=r,n.modal.dialog=i,n.modal.alert=s,n.modal.confirm=o}(jQuery,zlux,UIkit),function(e,n,t){"use strict";n.component("spin",{defaults:{"class":"",affix:"append"},init:function(){this.on()},on:function(){var n=this;n.icon_class=!1,n.icon=n.element.is("i")?n.element:e("i",n.element).first(),n.icon.length?(n.icon_class=n.icon.attr("class"),n.icon.width(n.icon.width()),n.icon.attr("class","uk-icon-zx-spinner uk-icon-spin")):(n.icon=e('<i class="uk-icon-zx-spinner uk-icon-spin"></i>'),"replace"==n.options.affix?n.element.html(n.icon):n.element[n.options.affix](n.icon)),n.icon.addClass(n.options["class"])},off:function(){var e=this;e.icon.removeClass("uk-icon-zx-spinner uk-icon-spin"),e.icon_class&&e.icon.attr("class",e.icon_class),e.icon.width(""),e.element.removeData("spin")}})}(jQuery,zlux,UIkit);