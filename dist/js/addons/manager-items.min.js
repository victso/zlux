/* ===================================================
 * zlux
 * https://zoolanders.com
 * ===================================================
 * Copyright (C) JOOlanders SL
 * http://www.gnu.org/licenses/gpl-2.0.html
 * ========================================================== */
!function(a,b,c,d){"use strict";var e,f=0,g=!1,h={},i={defaults:{apps:"",types:"",categories:"",tags:"",authors:""},init:function(){var c=this;b.extensions.manager.init.apply(this),this.id=f++,c.filter={},this.DTsettings.ajax=function(a,b,d){c.ajax(a,b,d)},a.extend(c.DTsettings.language,{emptyTable:b.lang._("IM_NO_ITEMS_FOUND"),info:b.lang._("IM_PAGINATION_INFO")})},DTsettings:{pageLength:5,columns:[{title:"",data:"_itemname","class":"zx-manager-resource-name uk-width-1-1",render:function(a,b){return"display"===b?"":a}}],initComplete:function(){},rowCallback:function(c,d){var e=d;e.details=[],e.details.push(d.application.name+" / "+d.type.name+" / "+d.id),e.details.push(d.created),d.author.name&&e.details.push({name:$this._("AUTHOR"),value:d.author.name});var f=b.managerResource(c,e);f.pushData(e),f.element.addClass("zx-manager-resource"),a(".zx-manager-resource-name",f.element).html("").append(f.render())},preDrawCallback:function(){},drawCallback:function(){}},ajax:function(c,d){{var e=this,f=e.filter.apps?e.filter.apps:e.options.apps,g=e.filter.types?e.filter.types:e.options.types,i=e.filter.cats?e.filter.cats:e.options.categories,j=e.filter.tags?e.filter.tags:e.options.tags;e.filter.authors?e.filter.authors:e.options.authors}c.apps=e.options.apps,c.types=e.options.types,c.categories=e.options.categories,c.tags=e.options.tags,c.authors=e.options.authors,c.filter_apps=f,c.filter_types=g,c.filter_cats=i,c.filter_tags=j,c.zlux2=!0;var k=c.draw;c.draw=0;var l=String(a.param(c)).hashCode();c.draw=k,b.ajax.requestAndNotify({url:b.url.get("ajax:",{controller:"zlux",task:"getItemsManagerData"}),data:c,queue:"itemsmanager"}).done(function(a){h[l]=a,d(a)})},reload:function(){var a=this;a.resources.DataTable().ajax.reload()},preResourceDelete:function(){}};b.component("itempicker",a.extend(!0,{},i,b.extensions.managerDropdown,{init:function(){var a=this;i.init.apply(this),b.extensions.managerDropdown.init.apply(this),this.on("click",function(){g!==a&&a.pick(this.value)}),e=this.initDropdown(e).addClass("zx-itempicker")},DTsettings:{ordering:!1,columns:[{title:"",data:"_itemname","class":"zx-x-main-column uk-width-1-1",render:function(a,b){return"display"===b?"":a}}],rowCallback:function(c,d){var e=d;e.details=[],e.details.push(d.application.name+" / "+d.type.name+" / "+d.id);var f=b.managerResource(c,e);f.pushData(e),f.element.addClass("zx-manager-resource"),a(".zx-x-main-column",f.element).append(f.render())}},pick:function(a){b.extensions.managerDropdown.pick.apply(this,[a]),g=this}})),a(d).on("focus.itempicker.zlux","[data-zx-itempicker]",function(c){var d=a(this);if(!d.data("itempicker")){c.preventDefault();{b.itempicker(d,a.UIkit.Utils.options(d.attr("data-zx-itempicker")))}d.trigger("focus")}}),a(d).on("click.itempicker.zlux",function(b){var c=a(b.target);!g||c[0]==e[0]||c.data("itempicker")||c.parents(".zx-itempicker:first").length||(e.hide(),g=!1)}),a.UIkit.ready(function(c){a("[data-zx-itempicker]",c).each(function(){var c=a(this);if(!c.data("itempicker")){b.itempicker(c,a.UIkit.Utils.options(c.attr("data-zx-itempicker")))}})})}(jQuery,jQuery.zx,window,document);