/**
 * @package     zlux
 * @version     2.0.3
 * @author      ZOOlanders - http://zoolanders.com
 * @license     GNU General Public License v2 or later
 */

!function(t,e,a){"use strict";var i,n=0,r=!1,s={},o={defaults:{apps:"",types:"",categories:"",tags:"",authors:""},init:function(){var a=this;e.extensions.manager.init.apply(this),this.id=n++,a.filter={},this.DTsettings.ajax=function(t,e,i){a.ajax(t,e,i)},t.extend(a.DTsettings.language,{emptyTable:e.lang._("IM_NO_ITEMS_FOUND"),info:e.lang._("IM_PAGINATION_INFO")})},DTsettings:{pageLength:5,columns:[{title:"",data:"_itemname","class":"zx-manager-resource-name uk-width-1-1",render:function(t,e){return"display"===e?"":t}}],initComplete:function(t){},rowCallback:function(a,i){var n=i;n.details=[],n.details.push(i.application.name+" / "+i.type.name+" / "+i.id),n.details.push(i.created),i.author.name&&n.details.push({name:$this._("AUTHOR"),value:i.author.name});var r=e.managerResource(a,n);r.pushData(n),r.element.addClass("zx-manager-resource"),t(".zx-manager-resource-name",r.element).html("").append(r.render())},preDrawCallback:function(t){},drawCallback:function(t){}},ajax:function(a,i,n){var r=this,o=r.filter.apps?r.filter.apps:r.options.apps,p=r.filter.types?r.filter.types:r.options.types,l=r.filter.cats?r.filter.cats:r.options.categories,c=r.filter.tags?r.filter.tags:r.options.tags;r.filter.authors?r.filter.authors:r.options.authors;a.apps=r.options.apps,a.types=r.options.types,a.categories=r.options.categories,a.tags=r.options.tags,a.authors=r.options.authors,a.filter_apps=o,a.filter_types=p,a.filter_cats=l,a.filter_tags=c,a.zlux2=!0;var u=a.draw;a.draw=0;var d=String(t.param(a)).hashCode();a.draw=u,e.ajax.requestAndNotify({url:e.url.get("ajax:",{controller:"zlux",task:"getItemsManagerData"}),data:a,queue:"itemsmanager"}).done(function(t){s[d]=t,i(t)})},reload:function(){var t=this;t.resources.DataTable().ajax.reload()},preResourceDelete:function(t,e){}};e.component("itempicker",t.extend(!0,{},o,e.extensions.managerDropdown,{init:function(){var t=this;o.init.apply(this),e.extensions.managerDropdown.init.apply(this),this.on("click",function(){r!==t&&t.pick(this.value)}),i=this.initDropdown(i).addClass("zx-itempicker")},DTsettings:{ordering:!1,columns:[{title:"",data:"_itemname","class":"zx-x-main-column uk-width-1-1",render:function(t,e){return"display"===e?"":t}}],rowCallback:function(a,i){var n=i;n.details=[],n.details.push(i.application.name+" / "+i.type.name+" / "+i.id);var r=e.managerResource(a,n);r.pushData(n),r.element.addClass("zx-manager-resource"),t(".zx-x-main-column",r.element).append(r.render())}},pick:function(t){e.extensions.managerDropdown.pick.apply(this,[t]),r=this}})),t(document).on("focus.itempicker.zlux","[data-zx-itempicker]",function(a){var i=t(this);if(!i.data("itempicker")){a.preventDefault();e.itempicker(i,t.UIkit.Utils.options(i.attr("data-zx-itempicker")));i.trigger("focus")}}),t(document).on("click.itempicker.zlux",function(e){var a=t(e.target);!r||a[0]==i[0]||a.data("itempicker")||a.parents(".zx-itempicker:first").length||(i.hide(),r=!1)}),t.UIkit.ready(function(a){t("[data-zx-itempicker]",a).each(function(){var a=t(this);if(!a.data("itempicker")){e.itempicker(a,t.UIkit.Utils.options(a.attr("data-zx-itempicker")))}})})}(jQuery,zlux,UIkit);