<!DOCTYPE html>
<html lang="en-gb" dir="ltr">
    <head>
        <meta charset="utf-8"></meta>
        <meta content="width=device-width, initial-scale=1" name="viewport"></meta>
        <title>zlux Files Manager</title>

        <link rel="stylesheet" href="../dist/css/zlux-uikit.css">
        <link rel="stylesheet" href="../dist/css/zlux.css">

        <script src="../vendor/jquery/dist/jquery.min.js"></script>
        <script src="../vendor/jquery-mockjax/dist/jquery.mockjax.min.js"></script>
        <script src="../vendor/uikit/js/uikit.min.js"></script>
        <script src="../vendor/vue/dist/vue.min.js"></script>
        <script src="../dist/js/zlux.js"></script>
        <script src="../dist/js/components/pagination.js"></script>
        <script src="../dist/js/components/files-manager.js"></script>

        <script type="text/javascript">

            Vue.config.debug = true;

            var $zlux = {
                config: {
                    'routesMap': {
                        'zlux/fetchResources': 'controller=zlux&task=getFilesManagerData',
                        'zlux/deleteResources': 'controller=zlux&task=deleteResources'
                    },
                    'debug': true
                }
            };

            // mock DT request
            $.mockjax(function(settings) {

                var location = settings.data.location === '/' ? '' : '/' + settings.data.location;

                if (settings.url.match(/&controller\=zlux\&task\=getFilesManagerData/)) {
                    return {
                        proxy: 'data/files' + location + '/index.json'
                    };
                }

                if (settings.url.match(/&controller\=zlux\&task\=deleteResources/)) {
                    return {
                        responseText: {
                            success: true
                        }
                    };
                }

                return;
            })

            UIkit.ready(function() {

                new Vue({
                    el: '[data-zx-files-manager]',
                    compiled: function() {
                        this.$.manager.fetch();
                    }
                })

            })

        </script>

    </head>
    <body class="zx">

        <div class="uk-container uk-container-center">

            <div data-zx-files-manager>
                <files-manager v-ref="manager"></files-manager>
            </div>

        </div>

    </body>
</html>
